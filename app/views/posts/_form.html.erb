<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :name %><br>
    <%= f.text_field :name %>
  </div>
  <div class="field">
    <%= f.label :title %><br>
    <%= f.text_field :title %>
  </div>
  <div class="field">
    <%= f.label :content %><br>
    <%= f.text_area :content, id: 'editor' %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>

<script>
if ($.trumbowyg) {
        // Add imagur parameters to upload plugin
        $.extend(true, $.trumbowyg.upload, {
            serverPath: "<%= photos_url %>",
            fileFieldName: 'image',
            headers: {'Authorization': 'Client-ID 9e57cb1c4791cea'},
            urlPropertyName: 'data.link'
        });
        }
$('#editor').trumbowyg({
            autogrow: true,
            fullscreenable: false,
            btnsDef: {
                // Customizables dropdowns
                image: {
                    dropdown: ['insertImage', 'upload', 'base64'],
                    ico: 'insertImage'
                }
            },
            btns: ['viewHTML',
                '|', 'formatting',
                '|', 'btnGrp-design',
                '|', 'link',
                '|', 'image',
                '|', 'btnGrp-justify',
                '|', 'btnGrp-lists',
                '|', 'horizontalRule']
        });
</script>